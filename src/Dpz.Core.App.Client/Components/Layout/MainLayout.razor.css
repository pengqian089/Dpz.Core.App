/* ============================================
   主布局容器 - 支持底部导航栏
   ============================================ */

.app-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100%;
    background-color: var(--app-bg-color);
    color: var(--app-text-color);
    overflow: hidden; /* 防止容器滚动 */
}

.app-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding-bottom: 60px; /* 为底部导航栏预留空间 */
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch; /* iOS 平滑滚动 */
    min-height: 0; /* 关键：允许 flex 子项收缩 */
}

/* 音乐页面特殊处理：禁用内容区域滚动 */
.app-content:has(.music-page) {
    overflow: hidden !important;
    padding-bottom: 0 !important;
}

/* ============================================
   浅色模式（默认）
   ============================================ */
:root {
    --app-bg-color: #f5f5f5;
    --app-text-color: #212121;
    --surface-color: #ffffff;
    --surface-variant-color: #e0e0e0;
    --outline-color: #bdbdbd;
}

/* ============================================
   深色模式
   ============================================ */
@media (prefers-color-scheme: dark) {
    :root {
        --app-bg-color: #121212;
        --app-text-color: #e0e0e0;
        --surface-color: #1e1e1e;
        --surface-variant-color: #2c2c2c;
        --outline-color: #424242;
    }
}

/* ============================================
   全局滚动条样式
   ============================================ */

::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--outline-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--surface-variant-color);
}

/* ============================================
   响应式调整
   ============================================ */
@media (max-width: 640px) {
    .app-content {
        padding-bottom: 56px;
    }
    
    .app-content:has(.music-page) {
        padding-bottom: 0 !important;
    }
}

@media (min-width: 641px) and (max-width: 1024px) {
    .app-content {
        padding-bottom: 64px;
    }
    
    .app-content:has(.music-page) {
        padding-bottom: 0 !important;
    }
}

/* ============================================
   页面过渡动画
   ============================================ */
.app-content {
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* ============================================
   安全区域支持（刘海屏/灵动岛）
   ============================================ */
@supports (padding: max(0px)) {
    .app-content {
        padding-left: max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
    }

    .bottom-navbar {
        padding-bottom: max(0px, env(safe-area-inset-bottom));
        height: calc(60px + max(0px, env(safe-area-inset-bottom)));
    }
}
